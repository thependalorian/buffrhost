# üõ†Ô∏è **BUFFR HOST - DEVELOPMENT GUIDE**
*Production-Ready Development Environment with Complete Type Safety*

## üöÄ **GETTING STARTED**

### **Current Status**
- **Frontend**: 95% Complete - Production-ready with hotel-centric architecture
- **Backend**: 90% Complete - Full API implementation with ML/AI integration
- **Database**: 100% Complete - Complete schema with hotel-centric architecture
- **Hotel Configuration**: 100% Complete - Full hotel-centric system implemented
- **Microservices**: 85% Complete - All core services implemented
- **Overall**: 90% Complete - Production-ready hotel-centric hospitality platform

### **Prerequisites**
- **Node.js**: 18.x or higher
- **Python**: 3.11+ (required for ML libraries)
- **PostgreSQL**: 14.x or higher
- **Redis**: 6.x or higher
- **Docker**: 20.x or higher (for microservices)
- **Git**: Latest version

### **Quick Start**
```bash
# Clone repository
git clone https://github.com/your-org/buffr-host.git
cd buffr-host

# Environment setup
cp .env.example .env
cp frontend/.env.example frontend/.env.local

# Database setup
docker-compose up -d postgres redis

# Backend setup
cd backend
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate
pip install -r requirements.txt

# Run comprehensive database migrations
cd migrations
psql -d your_database -f run_all_migrations.sql
cd ..

uvicorn main:app --reload --host 0.0.0.0 --port 8000

# Frontend setup (new terminal)
cd frontend
npm install
npm run dev

# Access application
# Frontend: http://localhost:3000
# Backend API: http://localhost:8000
# API Docs: http://localhost:8000/docs
```

---

## üèóÔ∏è **PROJECT ARCHITECTURE**

### **Frontend Architecture**
```
frontend/
‚îú‚îÄ‚îÄ app/                    # Next.js 14 App Router
‚îÇ   ‚îú‚îÄ‚îÄ (auth)/            # Authentication routes
‚îÇ   ‚îú‚îÄ‚îÄ admin/             # Admin dashboard
‚îÇ   ‚îú‚îÄ‚îÄ guest/             # Guest portal
‚îÇ   ‚îú‚îÄ‚îÄ protected/         # Protected routes
‚îÇ   ‚îî‚îÄ‚îÄ api/               # API routes
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/        # Reusable components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/           # Core UI components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ forms/        # Form components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout/       # Layout components
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ etuna/        # Etuna-specific components
‚îÇ   ‚îú‚îÄ‚îÄ lib/              # Utilities and configuration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types/        # TypeScript type definitions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas/      # Zod validation schemas
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api-client.ts # API client configuration
‚îÇ   ‚îî‚îÄ‚îÄ hooks/            # Custom React hooks
‚îú‚îÄ‚îÄ __tests__/            # Test files
‚îî‚îÄ‚îÄ public/               # Static assets
```

### **Backend Architecture**
```
backend/
‚îú‚îÄ‚îÄ ai/                    # AI/ML Systems (18 systems)
‚îÇ   ‚îú‚îÄ‚îÄ credit_scoring_model.py
‚îÇ   ‚îú‚îÄ‚îÄ fraud_detection_system.py
‚îÇ   ‚îú‚îÄ‚îÄ recommendation_engine.py
‚îÇ   ‚îî‚îÄ‚îÄ ... (15 more ML systems)
‚îú‚îÄ‚îÄ models/                # SQLAlchemy Models
‚îÇ   ‚îú‚îÄ‚îÄ user.py           # User and authentication models
‚îÇ   ‚îú‚îÄ‚îÄ hospitality_property.py
‚îÇ   ‚îú‚îÄ‚îÄ booking.py
‚îÇ   ‚îî‚îÄ‚îÄ ... (all business models)
‚îú‚îÄ‚îÄ routes/                # FastAPI Routes
‚îÇ   ‚îú‚îÄ‚îÄ auth.py           # Authentication endpoints
‚îÇ   ‚îú‚îÄ‚îÄ analytics.py      # Analytics endpoints
‚îÇ   ‚îú‚îÄ‚îÄ ml_routes.py      # ML/AI endpoints
‚îÇ   ‚îî‚îÄ‚îÄ ... (all API endpoints)
‚îú‚îÄ‚îÄ services/              # Business Logic
‚îÇ   ‚îú‚îÄ‚îÄ customer_service.py
‚îÇ   ‚îú‚îÄ‚îÄ ml_service.py
‚îÇ   ‚îî‚îÄ‚îÄ ... (all business services)
‚îú‚îÄ‚îÄ schemas/               # Pydantic Schemas
‚îÇ   ‚îú‚îÄ‚îÄ user.py
‚îÇ   ‚îú‚îÄ‚îÄ ml.py
‚îÇ   ‚îî‚îÄ‚îÄ ... (all data schemas)
‚îú‚îÄ‚îÄ auth/                  # Authentication
‚îú‚îÄ‚îÄ utils/                 # Utility functions
‚îú‚îÄ‚îÄ main.py               # FastAPI application
‚îú‚îÄ‚îÄ database.py           # Database configuration
‚îî‚îÄ‚îÄ config.py             # Application configuration
```

### **Microservices Architecture**
```
microservices/
‚îú‚îÄ‚îÄ api-gateway/           # API Gateway
‚îú‚îÄ‚îÄ auth-service/          # Authentication Service
‚îú‚îÄ‚îÄ customer-service/      # Customer Management
‚îú‚îÄ‚îÄ property-service/      # Property Management
‚îú‚îÄ‚îÄ booking-service/       # Booking Management
‚îú‚îÄ‚îÄ menu-service/          # Menu Management
‚îú‚îÄ‚îÄ order-service/         # Order Management
‚îú‚îÄ‚îÄ payment-service/       # Payment Processing
‚îú‚îÄ‚îÄ inventory-service/     # Inventory Management
‚îú‚îÄ‚îÄ analytics-service/     # Analytics Service
‚îú‚îÄ‚îÄ notification-service/  # Notification Service
‚îú‚îÄ‚îÄ audit-service/         # Audit Service
‚îú‚îÄ‚îÄ document-service/      # Document Service
‚îú‚îÄ‚îÄ hospitality-service/   # Hospitality Service
‚îú‚îÄ‚îÄ realtime-service/      # Real-time Service
‚îú‚îÄ‚îÄ signature-service/     # Signature Service
‚îú‚îÄ‚îÄ template-service/      # Template Service
‚îú‚îÄ‚îÄ workflow-service/      # Workflow Service
‚îî‚îÄ‚îÄ shared/               # Shared utilities
```

---

## üîß **DEVELOPMENT WORKFLOW**

### **Type Safety System**
The project uses a comprehensive type safety system:

#### **Frontend Type Safety**
```typescript
// TypeScript interfaces
import { Customer, Booking, Property } from '@/lib/types';

// Zod validation schemas
import { CustomerCreateSchema, BookingUpdateSchema } from '@/lib/schemas';

// API client with full type safety
import { apiServices } from '@/lib/api-client';

// React Query hooks with types
import { useCustomers, useBookings } from '@/hooks/use-customers';
```

#### **Backend Type Safety**
```python
# Pydantic models
from schemas.customer import CustomerCreate, CustomerUpdate
from schemas.booking import BookingCreate, BookingUpdate

# SQLAlchemy models
from models.user import User
from models.booking import Booking

# Type hints throughout
def create_customer(customer_data: CustomerCreate) -> Customer:
    # Implementation with full type safety
```

### **Database Development**
```bash
# Create new migration
cd backend
alembic revision --autogenerate -m "Add new field"

# Apply migrations
alembic upgrade head

# Create tables (development)
python -c "from database import create_tables; create_tables()"
```

### **API Development**
```python
# Add new endpoint
@router.post("/customers", response_model=CustomerResponse)
async def create_customer(
    customer: CustomerCreate,
    db: AsyncSession = Depends(get_db)
):
    # Implementation
```

### **Frontend Development**
```typescript
// Add new component
export function CustomerForm({ onSubmit }: CustomerFormProps) {
  const { mutate: createCustomer } = useCreateCustomer();
  
  const handleSubmit = (data: CustomerCreateInput) => {
    createCustomer(data);
  };
  
  return (
    <form onSubmit={handleSubmit}>
      {/* Form implementation */}
    </form>
  );
}
```

---

## üß™ **TESTING STRATEGY**

### **Frontend Testing**
```bash
# Run all tests
npm test

# Run specific test file
npm test CustomerForm.test.tsx

# Run tests with coverage
npm run test:coverage

# Run E2E tests
npm run test:e2e
```

### **Backend Testing**
```bash
# Run all tests
pytest

# Run specific test file
pytest tests/test_customer_service.py

# Run tests with coverage
pytest --cov=backend

# Run ML tests
pytest tests/test_ml_systems.py
```

### **API Testing**
```bash
# Test API endpoints
curl -X POST http://localhost:8000/api/v1/customers \
  -H "Content-Type: application/json" \
  -d '{"email": "test@example.com", "name": "Test User"}'

# Test with authentication
curl -X GET http://localhost:8000/api/v1/customers \
  -H "Authorization: Bearer YOUR_TOKEN"
```

---

## üîç **DEBUGGING GUIDE**

### **Frontend Debugging**
```typescript
// Use React DevTools
// Enable TypeScript strict mode
// Use console.log for debugging
console.log('Customer data:', customerData);

// Use React Query DevTools
import { ReactQueryDevtools } from '@tanstack/react-query-devtools';
```

### **Backend Debugging**
```python
# Use Python debugger
import pdb; pdb.set_trace()

# Use logging
import logging
logging.basicConfig(level=logging.DEBUG)

# Use FastAPI debug mode
uvicorn main:app --reload --log-level debug
```

### **Database Debugging**
```sql
-- Check table structure
\d table_name

-- Check data
SELECT * FROM table_name LIMIT 10;

-- Check indexes
\di table_name
```

---

## üìä **PERFORMANCE OPTIMIZATION**

### **Frontend Optimization**
- **Code Splitting**: Dynamic imports for large components
- **Image Optimization**: Next.js Image component
- **Caching**: React Query for API caching
- **Bundle Analysis**: `npm run analyze`

### **Backend Optimization**
- **Database Indexing**: Proper database indexes
- **Query Optimization**: Efficient SQL queries
- **Caching**: Redis for frequently accessed data
- **Connection Pooling**: Database connection pooling

### **ML/AI Optimization**
- **Model Caching**: Cache trained models
- **Batch Processing**: Process multiple predictions
- **Async Processing**: Non-blocking ML operations
- **Resource Management**: Efficient memory usage

---

## üîí **SECURITY BEST PRACTICES**

### **Authentication**
```typescript
// Frontend: Secure token storage
const token = localStorage.getItem('auth_token');
if (token) {
  apiClient.defaults.headers.common['Authorization'] = `Bearer ${token}`;
}
```

```python
# Backend: JWT token validation
@router.get("/protected")
async def protected_route(current_user: User = Depends(get_current_user)):
    return {"user": current_user.email}
```

### **Data Validation**
```typescript
// Frontend: Zod validation
const result = CustomerCreateSchema.safeParse(formData);
if (!result.success) {
  setErrors(result.error.issues);
}
```

```python
# Backend: Pydantic validation
@router.post("/customers")
async def create_customer(customer: CustomerCreate):
    # Pydantic automatically validates the data
    pass
```

### **Database Security**
```python
# Row Level Security (RLS)
# Enable RLS on sensitive tables
ALTER TABLE customers ENABLE ROW LEVEL SECURITY;

# Create RLS policies
CREATE POLICY customer_access ON customers
  FOR ALL TO authenticated_user
  USING (user_id = current_user_id());
```

---

## üöÄ **DEPLOYMENT**

### **Development Deployment**
```bash
# Start all services
docker-compose up -d

# Check service status
docker-compose ps

# View logs
docker-compose logs -f service_name
```

### **Production Deployment**
```bash
# Build production images
docker-compose -f docker-compose.prod.yml build

# Deploy to production
docker-compose -f docker-compose.prod.yml up -d

# Run database migrations
docker-compose exec backend alembic upgrade head
```

### **Microservices Deployment**
```bash
# Deploy individual services
cd microservices
./deploy.sh auth-service
./deploy.sh customer-service

# Deploy all services
./deploy-all.sh
```

---

## üìö **DOCUMENTATION STANDARDS**

### **Code Documentation**
```typescript
/**
 * Customer management hook
 * @param customerId - The customer ID
 * @returns Customer data and management functions
 */
export function useCustomer(customerId: string) {
  // Implementation
}
```

```python
def create_customer(customer_data: CustomerCreate) -> Customer:
    """
    Create a new customer
    
    Args:
        customer_data: Customer creation data
        
    Returns:
        Created customer object
        
    Raises:
        ValidationError: If customer data is invalid
        DatabaseError: If database operation fails
    """
    # Implementation
```

### **API Documentation**
```python
@router.post(
    "/customers",
    response_model=CustomerResponse,
    status_code=201,
    summary="Create a new customer",
    description="Create a new customer with the provided data"
)
async def create_customer(customer: CustomerCreate):
    """Create a new customer"""
    # Implementation
```

---

## üéØ **BEST PRACTICES**

### **Code Organization**
- **Single Responsibility**: Each function/component has one purpose
- **DRY Principle**: Don't repeat yourself
- **Consistent Naming**: Use clear, descriptive names
- **Type Safety**: Always use TypeScript types

### **Git Workflow**
```bash
# Create feature branch
git checkout -b feature/customer-management

# Make changes and commit
git add .
git commit -m "feat: add customer management functionality"

# Push and create PR
git push origin feature/customer-management
```

### **Code Review Checklist**
- [ ] Code follows project standards
- [ ] Tests are included and passing
- [ ] Documentation is updated
- [ ] Type safety is maintained
- [ ] Security best practices followed
- [ ] Performance considerations addressed

---

## üÜò **TROUBLESHOOTING**

### **Common Issues**

#### **Frontend Issues**
```bash
# Module not found
npm install missing-package

# TypeScript errors
npm run type-check

# Build errors
npm run build
```

#### **Backend Issues**
```bash
# Import errors
pip install -r requirements.txt

# Database connection
python -c "from database import engine; print(engine.url)"

# ML model errors
python test_all_ml_imports.py
```

#### **Database Issues**
```bash
# Connection issues
docker-compose logs postgres

# Migration issues
alembic current
alembic history
```

---

## üìû **SUPPORT**

### **Getting Help**
- **Documentation**: Check this guide and other docs
- **Issues**: Create GitHub issues for bugs
- **Discussions**: Use GitHub discussions for questions
- **Code Review**: Request code reviews for complex changes

### **Resources**
- **TypeScript**: [TypeScript Handbook](https://www.typescriptlang.org/docs/)
- **Next.js**: [Next.js Documentation](https://nextjs.org/docs)
- **FastAPI**: [FastAPI Documentation](https://fastapi.tiangolo.com/)
- **SQLAlchemy**: [SQLAlchemy Documentation](https://docs.sqlalchemy.org/)

---

**Happy Coding! üöÄ**

*Last updated: October 10, 2025*